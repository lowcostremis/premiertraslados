<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gestión de Reservas</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-functions.js"></script>
</head>
<body>

    <div id="auth-section">
        <div class="auth-container">
            <h2>Iniciar Sesión</h2>
            <input type="email" id="email" placeholder="Correo electrónico">
            <input type="password" id="password" placeholder="Contraseña">
            <button id="login-btn">Ingresar</button>
        </div>
    </div>

    <div id="app-content" style="display:none;">
        <header>
            <h1>Central de Gestión</h1>
            <div class="user-info">
                <span id="user-email-display"></span>
                <button id="logout-btn">Cerrar Sesión</button>
            </div>
        </header>

        <nav class="main-nav">
            <button class="tab-link active" onclick="openTab(event, 'reservas')">Reservas</button>
            <button class="tab-link" onclick="openTab(event, 'mapa')">Mapa</button>
            <button class="tab-link" onclick="openTab(event, 'clientes')">Clientes</button>
            <button class="tab-link" onclick="openTab(event, 'pasajeros')">Pasajeros</button>
            <button class="tab-link" onclick="openTab(event, 'choferes')">Choferes</button>
            <button class="tab-link" onclick="openTab(event, 'moviles')">Móviles</button>
            <button class="tab-link" onclick="openTab(event, 'admin')">Admin</button>
        </nav>

        <div id="reservas" class="tab-content">
            <div class="toolbar">
                <button id="btn-nueva-reserva" class="btn-primary">+ Nueva Reserva</button>
            </div>
            <nav class="sub-nav">
                <button class="sub-tab-btn active" data-tab="en-curso" onclick="showReservasTab('en-curso')">En Curso</button>
                <button class="sub-tab-btn" data-tab="pendientes" onclick="showReservasTab('pendientes')">Pendientes</button>
                <button class="sub-tab-btn" data-tab="asignados" onclick="showReservasTab('asignados')">Asignados</button>
                <button class="sub-tab-btn" data-tab="historico" onclick="showReservasTab('historico')">Histórico</button>
            </nav>
            <div class="reservas-container" id="reservas-en-curso"><div class="table-wrapper"><table id="tabla-en-curso"><thead><tr><th>Siniestro</th><th>Autorización</th><th>Cliente</th><th>Fecha</th><th>Turno</th><th>PickUp</th><th>Origen</th><th>Destino</th><th>Pasajero</th><th>Teléfono</th><th>Cant.</th><th>Zona</th><th>Estado</th><th>Acciones</th></tr></thead><tbody></tbody></table></div></div>
            <div class="reservas-container" id="reservas-pendientes" style="display:none;"><div class="table-wrapper"><table id="tabla-pendientes"><thead><tr><th>Siniestro</th><th>Autorización</th><th>Cliente</th><th>Fecha</th><th>Turno</th><th>PickUp</th><th>Origen</th><th>Destino</th><th>Pasajero</th><th>Teléfono</th><th>Cant.</th><th>Zona</th><th>Estado</th><th>Acciones</th></tr></thead><tbody></tbody></table></div></div>
            <div class="reservas-container" id="reservas-asignados" style="display:none;"><div class="table-wrapper"><table id="tabla-asignados"><thead><tr><th>Siniestro</th><th>Autorización</th><th>Cliente</th><th>Fecha</th><th>Turno</th><th>PickUp</th><th>Origen</th><th>Destino</th><th>Pasajero</th><th>Teléfono</th><th>Cant.</th><th>Zona</th><th>Estado</th><th>Acciones</th></tr></thead><tbody></tbody></table></div></div>
            <div class="reservas-container" id="reservas-historico" style="display:none;"><div class="table-wrapper"><table id="tabla-historico"><thead><tr><th>Siniestro</th><th>Autorización</th><th>Cliente</th><th>Fecha</th><th>Turno</th><th>PickUp</th><th>Origen</th><th>Destino</th><th>Pasajero</th><th>Teléfono</th><th>Cant.</th><th>Zona</th><th>Estado</th><th>Acciones</th></tr></thead><tbody></tbody></table></div></div>
        </div>

        <div id="mapa" class="tab-content" style="display:none;"><div id="map-container"></div></div>

        <div id="clientes" class="tab-content" style="display:none;">
            <h2>Gestión de Clientes</h2>
            <form id="form-clientes" class="admin-form">
                <input type="text" name="nombre" placeholder="Nombre de la empresa" required>
                <input type="text" name="cuit" placeholder="CUIT">
                <input type="text" name="domicilio" placeholder="Domicilio">
                <input type="text" name="telefono" placeholder="Teléfono">
                <label for="color_cliente">Color:</label><input type="color" name="color" id="color_cliente" value="#ffffff">
                <button type="submit">Guardar Cliente</button>
            </form>
            <div id="lista-clientes" class="lista-admin"></div>
        </div>

        <div id="pasajeros" class="tab-content" style="display:none;">
            <h2>Gestión de Pasajeros</h2>
            <form id="form-pasajeros" class="admin-form">
                <input type="text" name="dni" placeholder="DNI del Pasajero (obligatorio)" required>
                <input type="text" name="nombre_apellido" placeholder="Nombre y Apellido">
                <input type="text" name="telefono" placeholder="Teléfono">
                <input type="text" name="domicilio" placeholder="Domicilio Principal">
                <button type="submit">Guardar Pasajero</button>
            </form>
            <div id="lista-pasajeros" class="lista-admin"></div>
        </div>
        
        <div id="choferes" class="tab-content" style="display:none;">
            <h2>Gestión de Choferes</h2>
             <form id="form-choferes" class="admin-form">
                <input type="text" name="dni" placeholder="DNI (obligatorio)" required>
                <input type="text" name="nombre" placeholder="Nombre completo">
                <input type="text" name="domicilio" placeholder="Domicilio">
                <input type="text" name="telefono" placeholder="Teléfono">
                <select name="movil_actual_id"><option value="">Asignar Móvil...</option></select>
                <button type="submit">Guardar Chofer</button>
            </form>
            <div id="lista-choferes" class="lista-admin"></div>
        </div>

        <div id="moviles" class="tab-content" style="display:none;">
            <h2>Gestión de Móviles</h2>
             <form id="form-moviles" class="admin-form">
                <input type="text" name="numero" placeholder="N° de Móvil (obligatorio)" required>
                <input type="text" name="patente" placeholder="Patente (obligatorio)" required>
                <input type="text" name="marca" placeholder="Marca">
                <input type="text" name="modelo" placeholder="Modelo">
                <input type="number" name="capacidad_pasajeros" placeholder="Capacidad Pasajeros" min="1" max="8">
                <input type="text" name="titular_nombre" placeholder="Nombre del Titular">
                <input type="text" name="titular_domicilio" placeholder="Domicilio del Titular">
                <input type="text" name="titular_telefono" placeholder="Teléfono del Titular">
                <button type="submit">Guardar Móvil</button>
            </form>
            <div id="lista-moviles" class="lista-admin"></div>
        </div>
        
        <div id="admin" class="tab-content" style="display:none;"></div>
    </div>

    <div id="reserva-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h2 id="modal-title">Nueva Reserva</h2>
            <form id="reserva-form">
                <input type="hidden" id="reserva-id">
                <div class="form-grid">
                    <select id="cliente" name="cliente" required><option value="Default">Default</option></select>
                    <input type="text" id="siniestro" name="siniestro" placeholder="N° Siniestro">
                    <input type="text" id="autorizacion" name="autorizacion" placeholder="N° Autorización">
                    <input type="text" id="dni_pasajero" name="dni_pasajero" placeholder="DNI Pasajero">
                    <input type="text" id="nombre_pasajero" name="nombre_pasajero" placeholder="Nombre y Apellido Pasajero">
                    <input type="tel" id="telefono_pasajero" name="telefono_pasajero" placeholder="Teléfono Pasajero">
                    <input type="date" id="fecha_turno" name="fecha_turno" required>
                    <input type="time" id="hora_turno" name="hora_turno" required>
                    <input type="time" id="hora_pickup" name="hora_pickup" placeholder="Hora PickUp">
                    <input type="text" id="origen" name="origen" placeholder="Domicilio Origen" required>
                    <input type="text" id="destino" name="destino" placeholder="Domicilio Destino">
                    <select id="cantidad_pasajeros" name="cantidad_pasajeros"><option value="1">1 Pasajero</option><option value="2">2 Pasajeros</option><option value="3">3 Pasajeros</option><option value="4">4 Pasajeros</option></select>
                    <select id="zona" name="zona"><option value="">Seleccionar Zona...</option></select>
                </div>
                <textarea id="observaciones" name="observaciones" placeholder="Observaciones (máx 100 caracteres)" maxlength="100"></textarea>
                <button type="submit" class="btn-primary">Guardar Reserva</button>
            </form>
        </div>
    </div>

    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD33ys3G9-hHG0aw34EQByXecK3c7oEbFo&libraries=places&callback=initMap" defer></script>
    <script src="script.js"></script>

</body>
</html>